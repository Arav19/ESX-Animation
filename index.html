<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scroll Animation in Page</title>
  <style>
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
    body{
      font-family: sans-serif;
      background: #111;
      color: #fff;
      line-height: 1.5;
    }

    section {
      padding: 100px 20px;
      border-bottom: 1px solid #333;
    }

    /* --- SCROLL ANIMATION SECTION --- */
    #scroll-sequence {
      height: 100vh;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
    }

    #scroll-sequence img {
      width: min(70vw, 700px);
      max-width: 100%;
      display: block;
    }

    .spacer-line {
      height: 100px;
      border-bottom: 1px dashed #444;
      margin: 40px 0;
    }
  </style>
</head>
<body>

  <!-- TOP CONTENT -->
  <section><div class="spacer-line"></div></section>
  <section><div class="spacer-line"></div></section>
  <section><div class="spacer-line"></div></section>

  <!-- ANIMATED SEQUENCE -->
  <section id="scroll-sequence">
    <img id="frame" src="0001.png" alt="scroll animation frame">
  </section>

  <!-- BOTTOM CONTENT -->
  <section><div class="spacer-line"></div></section>
  <section><div class="spacer-line"></div></section>
  <section><div class="spacer-line"></div></section>

  <script>
    const FRAME_COUNT = 90;
    const pad = n => String(n).padStart(4, '0');

    // Preload images
    const imgs = [];
    for(let i = 1; i <= FRAME_COUNT; i++) {
      const img = new Image();
      img.src = `${pad(i)}.png`;
      imgs.push(img);
    }

    const imgTag = document.getElementById('frame');
    const section = document.getElementById('scroll-sequence');

    const updateFrame = () => {
      const rect = section.getBoundingClientRect();
      const sectionHeight = rect.height;
      const scrollPos = window.innerHeight - rect.top;

      // Only animate if in view
      if (rect.top <= window.innerHeight && rect.bottom >= 0) {
        const scrollFraction = Math.min(1, Math.max(0, scrollPos / (window.innerHeight + sectionHeight)));
        const frameIndex = 1 + Math.floor(scrollFraction * (FRAME_COUNT - 1));
        imgTag.src = `${pad(frameIndex)}.png`;
      }
    };

    window.addEventListener('scroll', updateFrame, { passive: true });
    window.addEventListener('resize', updateFrame);
    updateFrame();
  </script>
</body>
</html>
