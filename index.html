<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minimal Scroll Animation Proof</title>
<style>
  body {
    margin: 0;
    font-family: monospace, monospace;
    background: #fff;
    color: #000;
  }
  /* Simple grey bars simulating text lines */
  .line {
    width: 80%;
    height: 20px;
    background: #ccc;
    margin: 20px auto;
  }
  /* Container for animation */
  #animation-container {
    width: 80%;
    max-width: 600px;
    height: 350px;
    margin: 300px auto; /* big margin top and bottom so plenty of scroll */
    background: #eee;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  #animation-frame {
    max-width: 100%;
    max-height: 100%;
    user-select: none;
    pointer-events: none;
  }
</style>
</head>
<body>

  <!-- Simulated lines before animation -->
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>

  <!-- Animation container in middle -->
  <div id="animation-container">
    <img id="animation-frame" alt="scroll animation frame" src="" />
  </div>

  <!-- Simulated lines after animation -->
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>

<script>
  const FRAME_COUNT = 90;
  const pad = n => String(n).padStart(4, '0');
  const img = document.getElementById('animation-frame');
  const images = [];
  let loadedCount = 0;

  // Preload images assuming named 0001.png to 0090.png in repo root
  for(let i = 0; i < FRAME_COUNT; i++) {
    const image = new Image();
    image.src = `${pad(i + 1)}.png`;
    image.onload = () => {
      loadedCount++;
      if(loadedCount === FRAME_COUNT) {
        requestAnimationFrame(updateFrame);
      }
    }
    images.push(image);
  }

  function updateFrame() {
    const scrollTop = window.scrollY;
    const maxScroll = document.body.scrollHeight - window.innerHeight;
    const scrollFraction = maxScroll === 0 ? 0 : scrollTop / maxScroll;

    // Loop 4 times per full scroll length
    const frameIndex = Math.floor(scrollFraction * FRAME_COUNT * 4) % FRAME_COUNT;

    img.src = images[frameIndex].src;

    requestAnimationFrame(updateFrame);
  }
</script>

</body>
</html>
