<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Scroll Animation in Div Example</title>
<style>
  body {
    margin: 0;
    background: #111;
    color: #eee;
    font-family: monospace, monospace;
  }
  /* Simulated lines for title/body/footer */
  .line {
    height: 20px;
    width: 80%;
    background: #333;
    margin: 12px auto;
    border-radius: 4px;
  }
  .title-line {
    height: 30px;
    width: 60%;
    background: #555;
    margin: 30px auto 20px auto;
  }
  .footer-line {
    height: 18px;
    width: 50%;
    background: #222;
    margin: 20px auto 40px auto;
  }
  /* Container for animation */
  #animation-container {
    width: 80vw;
    max-width: 600px;
    height: 350px;
    margin: 60px auto;
    background: #000;
    border-radius: 12px;
    box-shadow: 0 0 15px #00ffddaa;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  #animation-frame {
    max-width: 100%;
    max-height: 100%;
    user-select: none;
    pointer-events: none;
  }
</style>
</head>
<body>

  <!-- Simulated title lines -->
  <div class="title-line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>

  <!-- Animation container in the middle -->
  <div id="animation-container">
    <img id="animation-frame" alt="scroll animation frame" src="" />
  </div>

  <!-- Simulated body lines -->
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>

  <!-- Simulated footer -->
  <div class="footer-line"></div>

<script>
  const FRAME_COUNT = 90;
  const pad = n => String(n).padStart(4, '0');
  const img = document.getElementById('animation-frame');
  const images = [];
  let loadedCount = 0;

  // Preload all images (assuming in root repo folder)
  for(let i = 0; i < FRAME_COUNT; i++) {
    const image = new Image();
    image.src = `${pad(i + 1)}.png`; // Adjust extension if needed
    image.onload = () => {
      loadedCount++;
      if (loadedCount === FRAME_COUNT) {
        requestAnimationFrame(updateFrame); // start loop after loading
      }
    }
    images.push(image);
  }

  function updateFrame() {
    // Scroll progress (0 to 1)
    const scrollTop = window.scrollY;
    const maxScroll = document.body.scrollHeight - window.innerHeight;
    const scrollFraction = maxScroll === 0 ? 0 : scrollTop / maxScroll;

    // Loop animation 4 times during full scroll (adjust as needed)
    const frameIndex = Math.floor((scrollFraction * FRAME_COUNT * 4)) % FRAME_COUNT;

    img.src = images[frameIndex].src;

    // Keep updating on next animation frame (loop forever)
    requestAnimationFrame(updateFrame);
  }
</script>

</body>
</html>
